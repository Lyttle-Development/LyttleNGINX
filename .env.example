# LyttleNGINX Environment Configuration
# Copy this file to .env and configure for your environment

# =====================
# Database Configuration
# =====================
DATABASE_URL=postgresql://user:password@localhost:5432/lyttlenginx

# =====================
# Application Configuration
# =====================
PORT=3000
NODE_ENV=production  # production | development

# =====================
# TLS/SSL Configuration
# =====================

# Email for Let's Encrypt certificate registration (REQUIRED for production)
ADMIN_EMAIL=admin@example.com

# Days before certificate expiry to trigger renewal
# Default: 30 days
RENEW_BEFORE_DAYS=30

# =====================
# Optional TLS Settings
# =====================

# Custom DNS resolvers for OCSP stapling (comma-separated)
# Default: 8.8.8.8,8.8.4.4,1.1.1.1
# DNS_RESOLVERS=8.8.8.8,8.8.4.4,1.1.1.1

# Enable DH parameter generation on startup (slow, ~5 minutes)
# Default: false
# GENERATE_DHPARAM=false

# DH parameter key size (2048 or 4096)
# Default: 2048
# DHPARAM_BITS=2048

# =====================
# NGINX Configuration
# =====================

# Path to NGINX configuration directory
# Default: /etc/nginx
# NGINX_CONF_DIR=/etc/nginx

# Path to Let's Encrypt certificates
# Default: /etc/letsencrypt
# LETSENCRYPT_DIR=/etc/letsencrypt

# =====================
# Logging
# =====================

# Log level: error | warn | log | debug | verbose
# Default: log
# LOG_LEVEL=log

# =====================
# Security (Recommended for Production)
# =====================

# API Key for certificate management endpoints (TODO: implement)
# API_KEY=your-secret-api-key

# JWT Secret for authentication (TODO: implement)
# JWT_SECRET=your-jwt-secret

# =====================
# Monitoring & Alerts (TODO: implement)
# =====================

# Email notifications for expiring certificates
# ALERT_EMAIL=alerts@example.com

# Slack webhook for alerts
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Discord webhook for alerts
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK

# =====================
# Backup Configuration
# =====================

# Directory for certificate backups
# Default: /tmp/cert-backups
BACKUP_DIR=/var/backups/certificates

# =====================
# Advanced Configuration (âœ… IMPLEMENTED)
# =====================

# Certificate cleanup interval (hours)
# How often to check for orphaned certificates
# Default: 24 hours
CERT_CLEANUP_INTERVAL=24

# Certificate renewal check interval (milliseconds)
# How often to check for certificates needing renewal
# Default: 43200000 (12 hours)
CERT_RENEWAL_INTERVAL=43200000

# Certificate monitoring cron schedule
# Daily health check and alert schedule (cron expression format)
# Default: "0 9 * * *" (9 AM daily)
CERT_MONITOR_CRON=0 9 * * *

# Nginx reload interval (minutes)
# How often to check for proxy entry changes and reload
# Default: 5 minutes
NGINX_RELOAD_INTERVAL=5

# Prometheus metrics cache duration (seconds)
# How long to cache metrics before recalculating
# Default: 30 seconds
METRICS_CACHE_DURATION=30

# =====================
# Development Settings
# =====================

# Skip Let's Encrypt in development
# Set NODE_ENV=development to use self-signed certificates
# When NODE_ENV=development, certbot commands are skipped

# Development domain for testing
DEV_DOMAIN=localhost

# Skip DNS validation in development
# Useful when working with local domains
SKIP_DNS_VALIDATION=true

# Enable debug logging
# Set LOG_LEVEL=debug for verbose output
DEBUG=false

# Disable rate limiting in development
# DISABLE_RATE_LIMITING=true

# =====================
# Production Recommendations
# =====================

# For production deployment:
# 1. Set NODE_ENV=production
# 2. Configure ADMIN_EMAIL with valid email
# 3. Set up SMTP for alerts (ALERT_EMAIL + SMTP_* vars)
# 4. Configure webhook alerts (SLACK_WEBHOOK_URL or DISCORD_WEBHOOK_URL)
# 5. Set secure BACKUP_DIR with proper permissions
# 6. Enable API authentication (API_KEY or JWT_SECRET)
# 7. Review rate limiting settings
# 8. Configure Prometheus scraping from /metrics endpoint
# 9. Set up automated backup scripts
# 10. Monitor certificate health via /metrics/json endpoint

# =====================
# Quick Start (Minimal Config)
# =====================

# For a quick start, only these are required:
# DATABASE_URL=postgresql://user:password@host:5432/db
# ADMIN_EMAIL=admin@example.com
# NODE_ENV=production

